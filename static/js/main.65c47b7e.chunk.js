(this["webpackJsonpguess-the-song"]=this["webpackJsonpguess-the-song"]||[]).push([[0],{15:function(e,t,n){e.exports=n(24)},20:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),o=n.n(c),i=n(1),u=(n(20),n(2));function l(){var e=Object(u.a)(["\n      margin-bottom: 20px;\n      text-align: center;\n    "]);return l=function(){return e},e}function s(){var e=Object(u.a)(["\n  font-family: 'Special Elite', cursive;\n  color: ",";\n  font-size: ",";\n  font-weight: bold;\n  margin-top: ",";\n\n  ","\n"]);return s=function(){return e},e}var f=i.c.h1(s(),(function(e){return e.theme.colors.chineseViolet}),(function(e){return e.small?"26px":"82px"}),(function(e){return e.small?"30px":"80px"}),(function(e){return e.small&&Object(i.b)(l())})),d=function(e){var t=e.small;return a.a.createElement(f,{small:t},"Guess the Song")};function p(){var e=Object(u.a)(["\n      display: block;\n      width: 100%;\n    "]);return p=function(){return e},e}function m(){var e=Object(u.a)(["\n          font-size: 20px;\n          padding: 12px 20px;\n        "]);return m=function(){return e},e}function b(){var e=Object(u.a)(["\n          font-size: 30px;\n          padding: 20px;\n        "]);return b=function(){return e},e}function g(){var e=Object(u.a)(["\n          font-size: 12px;\n          padding: 10px;\n        "]);return g=function(){return e},e}function h(){var e=Object(u.a)(["\n          background: #38c172;\n          color: #fff;\n          border-color: #399e64;\n        "]);return h=function(){return e},e}function v(){var e=Object(u.a)(["\n          background: ",";\n          color: ",";\n          border-color: ",";\n        "]);return v=function(){return e},e}function j(){var e=Object(u.a)(["\n  border-style: solid;\n  border-width: 1px;\n  text-decoration: none;\n  text-align: center;\n  border-radius:5px;\n\n  ","\n\n\n  ","\n\n  ","\n"]);return j=function(){return e},e}var O,E=i.c.button(j(),(function(e){switch(e.themeStyle){case"secondary":return Object(i.b)(v(),e.theme.colors.secondaryButtonBg,e.theme.colors.secondaryButtonColor,e.theme.colors.secondaryButtonColor);default:return Object(i.b)(h())}}),(function(e){switch(e.size){case"sm":return Object(i.b)(g());case"lg":return Object(i.b)(b());default:return Object(i.b)(m())}}),(function(e){return e.block&&Object(i.b)(p())})),y=n(3);function x(){var e=Object(u.a)(["\n  background: ",";\n  height: 100%;\n"]);return x=function(){return e},e}function k(){var e=Object(u.a)(["\n  height: 15px;\n  background: #ccc;\n  border: 1px solid #444;\n  border-radius: 10px;\n  overflow: hidden;\n  margin-bottom: 15px;\n"]);return k=function(){return e},e}var w=i.c.div(k()),S=i.c.div(x(),(function(e){return e.theme.colors.title})),T=function(e){var t=e.src,n=e.total,c=Object(r.useState)(0),o=Object(y.a)(c,2),i=o[0],u=o[1],l=Object(r.useRef)(null);return Object(r.useEffect)((function(){u(0)}),[t]),Object(r.useEffect)((function(){i===n&&(l.current&&l.current.pause(),O&&clearInterval(O))}),[i,n]),Object(r.useEffect)((function(){O=setInterval((function(){var e;(null===(e=l.current)||void 0===e?void 0:e.currentTime)&&u(Math.ceil(l.current.currentTime))}),10)}),[t]),a.a.createElement(a.a.Fragment,null,a.a.createElement(w,null,a.a.createElement(S,{style:{width:"".concat(i/n*100,"%")}})),a.a.createElement("audio",{src:t,ref:l,autoPlay:!0}))},I=function(){var e=Object(r.useState)(""),t=Object(y.a)(e,2),n=t[0],a=t[1],c="gts-spotify-token";Object(r.useEffect)((function(){var e=o();e&&a(e)}),[]);var o=function(){return localStorage.getItem(c)};return{token:n,actions:{readToken:o,saveToken:function(e){localStorage.setItem(c,e),a(e)}}}},C=n(4),_={genres:[],difficulty:"15",gameState:"INIT",points:0};function M(e){return"SWITCH_GAME_STATE"===e.type}function G(e){return"SET_GENRES"===e.type}function N(e){return"SET_DIFFICULTY"===e.type}function B(e){return"INCREMENT_POINTS"===e.type}function P(e){return{type:"SWITCH_GAME_STATE",payload:{nextState:e}}}var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;return M(t)?Object(C.a)({},e,{gameState:t.payload.nextState}):G(t)?Object(C.a)({},e,{genres:t.payload.genres}):N(t)?Object(C.a)({},e,{difficulty:t.payload.difficulty}):B(t)?Object(C.a)({},e,{points:e.points+1}):e},F=Object(r.createContext)({}),W=function(e){var t=e.children,n=Object(r.useReducer)(z,_),c=Object(y.a)(n,2),o=c[0],i=c[1];return a.a.createElement(F.Provider,{value:{state:o,dispatch:i}},t)};function A(){var e=Object(u.a)(["\n      color: #38c172;\n    "]);return A=function(){return e},e}function R(){var e=Object(u.a)(["\n      color: red;\n    "]);return R=function(){return e},e}function L(){var e=Object(u.a)(["\n      color: #38c172;\n    "]);return L=function(){return e},e}function U(){var e=Object(u.a)(["\n  display: block;\n  padding: 0;\n  border: 0;\n  font-family: sans-serif;\n  background: transparent;\n\n  ","\n  \n  ","\n\n  ","\n\n  &:disabled:hover {\n    cursor: not-allowed;\n  }\n"]);return U=function(){return e},e}function H(){var e=Object(u.a)(["\n  font-size: 16px;\n  font-weight: bold;\n"]);return H=function(){return e},e}function D(){var e=Object(u.a)(["\n  width: 100%;\n"]);return D=function(){return e},e}function Y(){var e=Object(u.a)(["\n  width: 50%;\n  padding: 10px;\n"]);return Y=function(){return e},e}function J(){var e=Object(u.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  margin: -10px -10px 40px;\n"]);return J=function(){return e},e}var V=i.c.ul(J()),q=i.c.li(Y()),$=i.c.img(D()),K=i.c.span(H()),Q=i.c.button(U(),(function(e){return e.success&&Object(i.b)(L())}),(function(e){return e.error&&Object(i.b)(R())}),(function(e){return e.played&&Object(i.b)(A())})),X=function(e){var t=e.tracks,n=e.selected,c=Object(r.useContext)(F).dispatch,o=Object(r.useState)(!1),i=Object(y.a)(o,2),u=i[0],l=i[1],s=Object(r.useState)(""),f=Object(y.a)(s,2),d=f[0],p=f[1];Object(r.useEffect)((function(){l(!1),p("")}),[n]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(V,null,t.map((function(e){var t=e.id,r=e.album,o=e.name,i=u&&t===d&&d===n,s=u&&t===d&&d!==n,f=u&&t!==d&&t===n;return a.a.createElement(q,{key:"track_".concat(t)},a.a.createElement(Q,{success:i,error:s,played:f,onClick:function(){return e=t,l(!0),p(e),void(e===n&&c({type:"INCREMENT_POINTS"}));var e},disabled:u},a.a.createElement($,{src:r.images[1].url,alt:""}),a.a.createElement(K,null,o)))}))))};function Z(){var e=Object(u.a)(["\n      display: flex;\n      justify-content: space-between;\n    "]);return Z=function(){return e},e}function ee(){var e=Object(u.a)(["\n  color: #222;\n  margin: 0 0 20px;\n  font-family: Arial, Helvetica, sans-serif;\n\n  ","\n"]);return ee=function(){return e},e}var te=i.c.h2(ee(),(function(e){return e.right&&e.right.length&&Object(i.b)(Z())})),ne=function(e){var t=e.children,n=e.right;return a.a.createElement(te,{right:n},t,n&&n.length&&a.a.createElement("span",null,n))},re=function(){return a.a.createElement("lottie-player",{src:"https://assets8.lottiefiles.com/packages/lf20_CyEC2p.json",background:"#38c172",speed:"1",style:{width:"100vw",height:150,marginLeft:"-30px",marginBottom:30},loop:!0,autoplay:!0})},ae=n(7),ce=n.n(ae),oe=n(14);function ie(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.random()*(t-e)+e}function ue(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}var le={id:"",name:"",album:{images:[]},artists:[],preview_url:""},se="https://api.spotify.com/v1/recommendations";var fe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,a=Object(r.useState)([]),c=Object(y.a)(a,2),o=c[0],i=c[1],u=Object(r.useState)(le),l=Object(y.a)(u,2),s=l[0],f=l[1],d=Object(r.useCallback)(Object(oe.a)(ce.a.mark((function r(){var a,c,o,u,l;return ce.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return i([]),a=[["limit",n],["seed_genres",t.join(",")],["min_acousticness",ie(0,.5)],["min_danceability",ie(0,.5)],["min_energy",ie(0,.5)],["min_instrumentalness",ie(0,.5)],["min_valence",ie(0,.5)]],c=a.reduce((function(e,t){var n=Object(y.a)(t,2),r=n[0],a=n[1];return e?"".concat(e,"&").concat(r,"=").concat(a):"".concat(r,"=").concat(a)}),""),r.next=7,fetch("".concat(se,"?").concat(c),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(e||""),"Content-Type":"application/json"})});case 7:return o=r.sent,r.next=10,o.json();case 10:u=r.sent,l=u.tracks,f(l[ue(1,4)]),i(l);case 14:case"end":return r.stop()}}),r)}))),[t,n,e]),p=function(){d()};return Object(r.useEffect)((function(){d()}),[d]),{tracks:o,selected:s,fetchMoreTracks:p}};function de(){var e=Object(u.a)(["\n  display: flex;\n  margin-left: -10px;\n  margin-right: -10px;\n\n  button {\n    margin-left: 10px;\n    margin-right: 10px;\n    width: 100%;\n  }\n"]);return de=function(){return e},e}var pe=i.c.div(de()),me=function(){var e=Object(r.useContext)(F).state,t=I().token,n=fe(t,e.genres),c=n.tracks,o=n.selected,i=n.fetchMoreTracks;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ne,{right:"Pts: ".concat(e.points)},"Playing: "),o.id&&a.a.createElement(T,{src:o.preview_url,total:parseInt(e.difficulty,10)}),a.a.createElement(re,null),a.a.createElement(X,{tracks:c,selected:o.id}),a.a.createElement(pe,null,a.a.createElement(E,{themeStyle:"secondary"},"Reiniciar"),a.a.createElement(E,{onClick:i},"Next Track")))};function be(){var e=Object(u.a)(["\n      border: 1px solid #333;\n      color: #333;\n      background: transparent;\n    "]);return be=function(){return e},e}function ge(){var e=Object(u.a)(["\n      background: #3f96e4;\n      color: #fff;\n      font-weight: bold;\n    "]);return ge=function(){return e},e}function he(){var e=Object(u.a)(["\n      width: 100%;\n    "]);return he=function(){return e},e}function ve(){var e=Object(u.a)(["\n  padding: 10px;\n  margin: 5px;\n  font-size: 20px;\n  border: 0;\n  border-radius: 5px;\n\n  ","\n\n  ","\n\n  ","\n"]);return ve=function(){return e},e}var je=i.c.button(ve(),(function(e){return e.fullWidth&&Object(i.b)(he())}),(function(e){return e.selected&&Object(i.b)(ge())}),(function(e){return!e.selected&&Object(i.b)(be())})),Oe=function(e){var t=e.id,n=e.title,r=e.selected,c=e.toggleItem,o=e.multiple,i=e.fullWidth,u=e.limit,l=e.totalSelected;return a.a.createElement(je,{selected:r,fullWidth:i,onClick:function(){r?c(t,o):u?u&&l<u&&c(t,o):c(t,o)}},n)};function Ee(){var e=Object(u.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  margin: -5px;\n"]);return Ee=function(){return e},e}function ye(){var e=Object(u.a)(["\n  margin-bottom: 40px;\n"]);return ye=function(){return e},e}var xe=function(e){var t=e.title,n=e.options,r=e.toggleItem,c=e.multiple,o=e.fullWidth,i=e.limit,u=n.filter((function(e){return e.selected})).length;return a.a.createElement(ke,null,a.a.createElement(ne,null,t),a.a.createElement(we,null,n.map((function(e){return a.a.createElement(Oe,Object.assign({key:e.id,multiple:c,toggleItem:r,fullWidth:o,limit:i,totalSelected:u},e))}))))};xe.defaultProps={multiple:!1,fullWidth:!1};var ke=i.c.div(ye()),we=i.c.div(Ee()),Se=xe;function Te(e){return{type:"options/SET-ITEMS",payload:{items:e}}}var Ie=function(e,t){return function(e){return"options/SET-ITEMS"===e.type}(t)?{items:t.payload.items}:function(e){return"options/TOGGLE-ITEM"===e.type}(t)?t.payload.multiple?{items:e.items.map((function(e){return e.id===t.payload.id?Object(C.a)({},e,{selected:!e.selected}):e}))}:{items:e.items.map((function(e){return e.id===t.payload.id?Object(C.a)({},e,{selected:!0}):Object(C.a)({},e,{selected:!1})}))}:e},Ce=["blues","country","dance","disco","folk","forro","funk","gospel","hip-hop","house","indie","jazz","k-pop","metal","mpb","pagode","pop","punk","reggae","reggaeton","rock","samba","sertanejo","ska"],_e=function(){var e=Object(r.useContext)(F).dispatch,t=Object(r.useReducer)(Ie,{items:[]}),n=Object(y.a)(t,2),c=n[0],o=n[1],i=Object(r.useReducer)(Ie,{items:[]}),u=Object(y.a)(i,2),l=u[0],s=u[1],f=I().token;Object(r.useEffect)((function(){o(Te(Ce.map((function(e){return{id:e,title:e,selected:!1}})))),s(Te([{id:"15",title:"Easy",selected:!1},{id:"10",title:"Medium",selected:!0},{id:"5",title:"Hard",selected:!1}]))}),[f]);var d=function(e){return function(t,n){e(function(e,t){return{type:"options/TOGGLE-ITEM",payload:{id:e,multiple:t}}}(t,n))}};return a.a.createElement(a.a.Fragment,null,a.a.createElement(Se,{title:"Select the genres you want to guess",options:c.items,toggleItem:d(o),limit:3,multiple:!0}),a.a.createElement(Se,{title:"Select the difficulty",toggleItem:d(s),options:l.items}),a.a.createElement(E,{onClick:function(){e(function(e){return{type:"SET_GENRES",payload:{genres:e}}}(c.items.filter((function(e){return e.selected})).map((function(e){return e.id})))),e({type:"SET_DIFFICULTY",payload:{difficulty:l.items.filter((function(e){return e.selected}))[0].id}}),e(P("PLAYING"))}},"Start Game"))},Me=["user-top-read"],Ge=function(){var e=Object(r.useContext)(F).dispatch,t=I(),n=t.token,c=t.actions,o=c.readToken,i=c.saveToken;Object(r.useEffect)((function(){var t=window.location.hash;t&&(i(t.replace("#","").split("&")[0].split("=")[1]),e(P("SETTING_UP")))}),[e,i]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(E,{size:"lg",onClick:function(){n||o()?e(P("SETTING_UP")):window.location.href="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("d9d505e880594b7ca174cf7feeb525ea","&redirect_uri=").concat("https://hermesnetto.github.io/guess-the-song/","&scope=").concat(Me.join("%20"),"&response_type=token&show_dialog=true")},block:!0},"Start Game"))};function Ne(){var e=Object(u.a)(["\n      margin-top: 20px;\n    "]);return Ne=function(){return e},e}function Be(){var e=Object(u.a)(["\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 0 30px;\n  display: flex;\n  flex-direction: column;\n\n  ","\n"]);return Be=function(){return e},e}function Pe(){var e=Object(u.a)(["\n  width: 100vw;\n  height: 100vh;\n"]);return Pe=function(){return e},e}var ze=i.c.div(Pe()),Fe=i.c.div(Be(),(function(e){return e.spaceTop&&Object(i.b)(Ne())})),We=function(e){e.children;var t=Object(r.useContext)(F).dispatch,n=I().actions.saveToken;Object(r.useEffect)((function(){var e=window.location.hash;e&&(n(e.replace("#","").split("&")[0].split("=")[1]),t(P("SETTING_UP")),window.history.pushState("",document.title,window.location.pathname+window.location.search))}),[t,n]);var c=Object(r.useContext)(F).state;var o="INIT"===c.gameState;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ze,null,a.a.createElement(Fe,{spaceTop:!o},o&&a.a.createElement(d,null),"PLAYING"===c.gameState?a.a.createElement(me,null):function(e){return"SETTING_UP"===e}(c.gameState)?a.a.createElement(_e,null):a.a.createElement(Ge,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ae="#D9E4E5",Re="#63C7B2",Le="#394E53",Ue="#fff07c",He={colors:{platinum:Ae,middleBlue:"#80CED7",mediumAquamarine:Re,chineseViolet:"#8E6C88",darkSlateGray:Le,sunny:Ue,background:Le,title:Ue,subtitle:Le,primaryButtonBg:Re,primaryButtonColor:Le,secondaryButtonBg:Ae,secondaryButtonColor:Le}};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(i.a,{theme:He},a.a.createElement(W,null,a.a.createElement(We,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.65c47b7e.chunk.js.map